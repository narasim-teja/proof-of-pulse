# environment: local | TEE
environment: TEE

# network: testnet | mainnet
network: testnet

# Path to docker-compose file
docker_compose_path: ./docker-compose.yaml

agent_contract:
  # NEAR Account Id for the agent contract
  # ac-proxy for local, ac-sandbox for Phala Cloud
  contract_id: ac-sandbox.pop-oracle.testnet

  # Contract already deployed at ac-sandbox.pop-oracle.testnet â€” skip re-deploy
  deploy_custom:
    enabled: false
    funding_amount: 4
    delete_key: false

    # Use the standard shade agent contract (global hash)
    deploy_from_source:
      enabled: false
      source_path: ./shade-contract-template
    deploy_from_wasm:
      enabled: false
      wasm_path: ./shade-contract-template/target/near/shade_contract_template.wasm
    use_global_by_hash:
      enabled: true
      global_hash: 8eHvv9q4eovoUgDXYEduwv3dbcfXkCyPP9TSmhUSxkcm

    # Initialize the agent contract
    init:
      enabled: true
      method_name: new
      args: |
        {
          "requires_tee": <REQUIRES_TEE>,
          "attestation_expiration_time_ms": <7_DAYS>,
          "owner_id": <MASTER_ACCOUNT_ID>,
          "mpc_contract_id": <DEFAULT_MPC_CONTRACT_ID>
        }

# Approve measurements for local (disabled - not needed for local with requires_tee: false)
approve_measurements:
  enabled: false
  method_name: approve_measurements
  args: |
    {
      "measurements": <MEASUREMENTS>
    }

# Approve PPIDs for local (disabled - not needed for local with requires_tee: false)
approve_ppids:
  enabled: false
  method_name: approve_ppids
  args: |
    {
      "ppids": <PPIDS>
    }

# Docker build - enabled for TEE
build_docker_image:
  enabled: true
  tag: narasimteja/proof-of-pulse-agent
  cache: true
  dockerfile_path: ./Dockerfile

# Phala deployment - enabled for TEE
deploy_to_phala:
  enabled: true
  app_name: proof-of-pulse-agent
  env_file_path: ./.env.development.local

# Whitelist agent for local development
whitelist_agent_for_local:
  method_name: whitelist_agent_for_local
  args: |
    {
      "account_id": <AGENT_ACCOUNT_ID>
    }
